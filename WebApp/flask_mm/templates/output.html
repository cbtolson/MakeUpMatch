<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Makeup Match: Recommendations</title>

    <!-- <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet"> -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Playfair+Display:400,400i" rel="stylesheet"> -->
    
    <!-- Animate.css -->
    <link href='{{ url_for('static', filename='css/animate.css') }}' rel='stylesheet' type='text/css'>
    <!-- Icomoon Icon Fonts-->
    <link href='{{ url_for('static', filename='css/icomoon.css') }}' rel='stylesheet' type='text/css'>
    <!-- Bootstrap  -->
    <link href='{{ url_for('static', filename='css/bootstrap.css') }}' rel='stylesheet' type='text/css'>
    <!-- Theme style  -->
    <link href='{{ url_for('static', filename='css/style.css') }}' rel='stylesheet' type='text/css'>
                    
    <!-- Modernizr JS -->
    
    <script src='{{ url_for('static', filename='js/modernizr-2.6.2.min.js') }}'></script>
    <!-- FOR IE9 below -->
    <!--[if lt IE 9]>
     <script src="../static/js/respond.min.js"></script>
     <![endif]-->
</head>
<style>
    #footer {
        position: fixed;
        bottom: 0;
        width: 100%;
    }
    #image {
        background-image: url(Error.src);
    }
    .right {
        float: right
    }
    .bold {
        font-weight:bold;
    }
    .column-ll{ float: left; width: 30%; word-break: break-word; margin-right: 10px; margin-left: 5px;}
    .column-rr{ float: right; width: 60%; word-break: break-word; margin-right: 5px; margin-left: 10px; margin-top:-80px}
    .column-left{ float: left; width: 30%; word-break: break-word; margin-right: 10px; margin-left: 10px;}
    .column-right{ float: right; width: 30%; word-break: break-word; margin-right: 10px; margin-left: 10px;}
    .column-center{ display: inline-block; width: 30%; word-break: break-word; margin-right: 10px;  margin-left: 10px; }
    .node {
        stroke: #fff;
        stroke-width: 1.5px;
    }
    .link {
        stroke: #999;
        stroke-opacity: .6;
    }
    .d3-tip {
        line-height: 1;
        color: black;
    }
    .ratings {
        position: relative;
        vertical-align: middle;
        display: inline-block;
        color: #b1b1b1;
        overflow: hidden;
    }
    .full-stars {
        position: absolute;
        left: 0;
        top: 0;
        white-space: nowrap;
        overflow: hidden;
        color: #7D0541;
    }
    .empty-stars:before, .full-stars:before {
        content:"\2605\2605\2605\2605\2605";
        font-size: 10pt;
    }
    .empty-stars:before {
        -webkit-text-stroke: 1px #848484;
    }
    .full-stars:before {
        -webkit-text-stroke: 1px #7D0541;
    }
    @-moz-document url-prefix() {
        .full-stars {
            color: #7D0541;
        }
    }
    <!--[if IE]> .full-stars {
        color: #7D0541;
    }
    <![endif]-->
</style>
<body>
    
    <div class="fh5co-loader"></div>
    
    <div id="page">
        <nav class="fh5co-nav" role="navigation">
            <div class="container">
                <div class="fh5co-top-logo">
                    <div id="fh5co-logo"><a href="{{ url_for('homepage') }}"  style="color:#7D0541">MM Home</a></div>
                </div>
                <div class="fh5co-top-menu menu-1 text-left">
                    <ul>
                        <li><a href="{{ url_for('about') }}">About</a></li>
                        <li><a href="{{ url_for('examples') }}">Examples</a></li>
                        <li><a href="{{ url_for('contact') }}">Contact</a></li>
                </div>
                <div class="fh5co-top-social menu-1 text-right">
                    <ul class="fh5co-social">
                        <li><a href="mailto:ctwoods05@gmail.com"><i class="icon-email"></i></a></li>
                        <li><a href="https://www.github.com/cbtolson"><i class="icon-github"></i></a></li>
                        <li><a href="https://www.linkedin.com/in/chanintolson"><i class="icon-linkedin"></i></a></li>
                    </ul>
                </div>
                
            </div>
        </nav>
        <br><br>
        
                        <center>
                        <div class="fh5co-heading">
                        <h2  style="color:#7D0541">Recommendations</h2>
                        <br>
                        <font size="5">Original Product</font>
                        <br><br>
                        <p style="font-size:small;margin-bottom:-55px;margin-top:0px;margin-left:325px">
                        Hover to get the product name.<br>(Darker nodes and thicker lines are for more similar products.)
                        </p><br><br><br>
                        <div class="container">
                        <div class="column-ll">
                            <img id="ref_im0" src="{{ url_for('static', filename='product_images/'+reference['id']+'.jpg') }}" height="220"/><br><br>
                            <p class="bold" id="ref_b0" style="font-size:small;margin-bottom:0px">{{ reference['brand'] }}</p>
                            <p id="ref_n0" style="font-size:small">{{ reference['name'] }}</p>
                            <a id="ref_link0" href="{{ reference['url'] }}">Find Product</a><br>
                        </div>
                        <div class="column-rr">
                            <svg id="fullviz" height="400" viewBox="0 0 500 500" preserveAspectRatio="xMaxYMax"></svg>
                        </div>
                        </div>
                        <br>
                        <font size="5">Recommendations</font>
                        <br><br><br>
                        <div class="container">
                            
                            {% for rec in recommended %}
                            <div class="column-left" style="margin-bottom:90px">
                                <img id="im0" src="{{ url_for('static', filename='product_images/'+rec['id']+'.jpg') }}" height="100"/><br><br>
                                <p class="bold" id="b0" style="font-size:small;margin-bottom:0px">{{ rec['brand'] }}</p>
                                <p id="n0" style="font-size:small;margin-bottom:0px">{{ rec['name'] }}</p>
                                
                                <div class="ratings">
                                    <div class="empty-stars"></div>
                                    <div id="fs0" class="full-stars" style='width:{{ rec['rating'] }}'></div>
                                </div><br><br>
                                <a id="link0" href="{{ rec['url'] }}">Find Product</a>
                            </div>
                            {% endfor %}

                        </div>
                        </div>
                        <br><br>
                        </center>
            </div>
    
    <div class="gototop js-top">
        <a href="#" class="js-gotop"><i class="icon-arrow-up"></i></a>
    </div>
        
    {{ JSGlue.include() }}
     
    <!-- JQuery -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <!-- D3 -->
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js"></script>
    <script type="text/javascript" src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <!-- Plot full force graph src='{{ url_for('static', filename='js/visualize.js') }}'-->
    <script type="text/javascript" >
    jQuery(document).ready(function() {
                           
        //Constants for the SVG
        var width = 500,
        height = 500;
                           
        //Set up the force layout
        var force = d3.layout.force()
            .charge(-1000)
            .linkDistance(120)
            .size([width, height])
                           
        //select svg
        var svg = d3.select("#fullviz")
            .attr("width", width)
            .attr("height", height);
         
        //Set up tooltip
        var tip = d3.tip()
            .attr('class', 'd3-tip')
            .offset([60, 0])
            .html(function (d) {
                return  d.name + "</span>";
             })
            svg.call(tip);
         
        //get graph data
        var graph = {{ graph|tojson }};
                           
        //Create graph
        force.nodes(graph.nodes)
            .links(graph.links)
            .start();
       
        //Create lines
        var link = svg.selectAll(".link")
            .data(graph.links)
            .enter().append("line")
            .attr("class", "link")
            .style("stroke-width", 2);
                           
        //Create color scale
        var colorScale = d3.scale.linear()
            .range(["white", d3.rgb("#7D0541")]) // or use hex values
            .domain([0, 7]);
                           
        //Create circles
        var node = svg.selectAll(".node")
            .data(graph.nodes)
            .enter().append("circle")
            .attr("class", "node")
            .attr("r", 16)
            .style("fill", function (d) {
                if(d.group == 0){
                   return(d3.rgb("#7D0541").darker(1));
                } else{
                   return(colorScale(10**(d.group/100)));
                }
            })
            .call(force.drag)
            .on('mouseover', tip.show)
            .on('mouseout', tip.hide);
                           
            //update the attributes of the SVG elements
            force.on("tick", function () {
                link.attr("x1", function (d) {
                    return d.source.x;
                })
                .attr("y1", function (d) {
                    return d.source.y;
                })
                .attr("x2", function (d) {
                    return d.target.x;
                })
                .attr("y2", function (d) {
                    return d.target.y;
                });
                                    
                node.attr("cx", function (d) {
                    return d.x;
                })
                .attr("cy", function (d) {
                    return d.y;
                });
            });
    });
    </script>

    <!-- jQuery -->
    <script src='{{ url_for('static', filename='js/jquery.min.js') }}'></script>
    <!-- jQuery Easing -->
    <script src='{{ url_for('static', filename='js/jquery.easing.1.3.js') }}'></script>
    <!-- Bootstrap -->
    <script src='{{ url_for('static', filename='js/bootstrap.min.js') }}'></script>
    <!-- Waypoints -->
    <script src='{{ url_for('static', filename='js/jquery.waypoints.min.js') }}'></script>
    <!-- Main -->
    <script src='{{ url_for('static', filename='js/main.js') }}'></script>

</body>
</html>







